{"level":"info","message":"Novo usuário registrado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"errors":[{"instance":{"created_at":"2025-06-06T00:52:52.273Z","email":"turing@laurem.com.br","id":"c470f871-954e-489c-b0e0-472d17c2ed58","name":"Alan Turing","password_hash":"$2b$10$qKSxi1kA3a4bQV0lKDtAWu/VMPRT0RmfgcXnvOqw5kLYJqDkfjLuC","role":"client","updated_at":"2025-06-06T00:52:52.273Z"},"message":"Validation isIn on role failed","origin":"FUNCTION","original":{"validatorArgs":[["therapist","patient"]],"validatorName":"isIn"},"path":"role","type":"Validation error","validatorArgs":[["therapist","patient"]],"validatorKey":"isIn","validatorName":"isIn","value":"client"}],"level":"error","name":"SequelizeValidationError"}
{"level":"info","message":"Novo usuário registrado: turing@laurem.com.br"}
{"level":"info","message":"Usuário logado: turing@laurem.com.br"}
{"level":"info","message":"Usuário logado: turing@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: turing@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Novo usuário registrado: joao@example.com"}
{"level":"info","message":"Usuário logado: joao@example.com"}
{"errors":[{"instance":{"created_at":"2025-06-07T21:37:43.157Z","email":"gg@mail.com","id":"da89b9aa-ac1b-4530-8eac-e81b233c1293","password_hash":"$2b$10$zOra5pZb.XQ61Q2Yv9WdROt5ZQ/6o2Zp7pvl47daPYrlaYqJj0ZES","role":"therapist","updated_at":"2025-06-07T21:37:43.157Z"},"message":"User.name cannot be null","origin":"CORE","path":"name","type":"notNull Violation","validatorArgs":[],"validatorKey":"is_null","validatorName":null,"value":null}],"level":"error","name":"SequelizeValidationError"}
{"level":"info","message":"Novo usuário registrado: gg@mail.com"}
{"level":"info","message":"Usuário logado: gg@mail.com"}
{"level":"info","message":"Novo usuário registrado: contatogppe@gmail.com"}
{"level":"info","message":"Usuário logado: contatogppe@gmail.com"}
{"level":"info","message":"Novo usuário registrado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Novo usuário registrado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Novo usuário registrado: gg@mail.com"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"error","message":"Erro ao agendar sessão: Argument passed to findByPk is invalid: [object Promise]","stack":"Error: Argument passed to findByPk is invalid: [object Promise]\n    at Patient.findByPk (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1219:13)\n    at exports.create (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:28:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao agendar sessão: Argument passed to findByPk is invalid: [object Promise]","stack":"Error: Argument passed to findByPk is invalid: [object Promise]\n    at Patient.findByPk (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1219:13)\n    at exports.create (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:29:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: fgbhdassd@fndj.com"}
{"level":"info","message":"Usuário logado: fgbhdassd@fndj.com"}
{"level":"error","message":"Erro ao agendar sessão: Argument passed to findByPk is invalid: [object SequelizeInstance:Patient]","stack":"Error: Argument passed to findByPk is invalid: [object SequelizeInstance:Patient]\n    at Patient.findByPk (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1219:13)\n    at exports.create (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:32:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao agendar sessão: Cannot access 'Appointment' before initialization","stack":"ReferenceError: Cannot access 'Appointment' before initialization\n    at exports.create (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:41:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao agendar sessão: Cannot read properties of undefined (reading 'findOne')","stack":"TypeError: Cannot read properties of undefined (reading 'findOne')\n    at exports.create (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:41:40)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao agendar sessão: Cannot read properties of undefined (reading 'findOne')","stack":"TypeError: Cannot read properties of undefined (reading 'findOne')\n    at exports.create (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:40:40)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao agendar sessão: Cannot read properties of undefined (reading 'findOne')","stack":"TypeError: Cannot read properties of undefined (reading 'findOne')\n    at exports.create (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:42:40)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao agendar sessão: Cannot read properties of undefined (reading 'findOne')","stack":"TypeError: Cannot read properties of undefined (reading 'findOne')\n    at exports.create (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:42:40)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"expiredAt":"2025-06-09T19:02:57.000Z","level":"error","message":"jwt expired","name":"TokenExpiredError"}
{"expiredAt":"2025-06-09T19:02:57.000Z","level":"error","message":"jwt expired","name":"TokenExpiredError"}
{"level":"info","message":"Usuário logado: fgbhdassd@fndj.com"}
{"level":"info","message":"Usuário logado: fgbhdassd@fndj.com"}
{"level":"info","message":"Usuário logado: fgbhdassd@fndj.com"}
{"level":"info","message":"Usuário logado: fgbhdassd@fndj.com"}
{"level":"info","message":"[96365e58-e948-4bf5-b0cb-53fbe32d9038] consulta destruída"}
{"level":"info","message":"[1b36b6c5-d874-4eb9-a08a-ef86d4d750bb] consulta destruída"}
{"level":"info","message":"[6917193a-288f-4dbe-b6c2-f29ea890ecca] consulta destruída"}
{"level":"info","message":"[6fd42ea4-545e-4346-a1af-146dca27ffd8] consulta destruída"}
{"expiredAt":"2025-06-09T18:14:16.000Z","level":"error","message":"jwt expired","name":"TokenExpiredError"}
{"expiredAt":"2025-06-09T18:14:16.000Z","level":"error","message":"jwt expired","name":"TokenExpiredError"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"expiredAt":"2025-06-09T21:45:20.000Z","level":"error","message":"jwt expired","name":"TokenExpiredError"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: fgbhdassd@fndj.com"}
{"level":"info","message":"Novo usuário registrado: teste@mail.com"}
{"level":"info","message":"Usuário logado: teste@mail.com"}
{"level":"info","message":"Usuário logado: teste@mail.com"}
{"level":"info","message":"Usuário logado: teste@mail.com"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Novo usuário registrado: roberval@mail.com"}
{"level":"info","message":"Usuário logado: roberval@mail.com"}
{"level":"info","message":"Novo usuário registrado: thelma@mail.com"}
{"level":"info","message":"Novo usuário registrado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"info","message":"Usuário logado: liszt@laurem.com.br"}
{"level":"error","message":"Erro ao buscar sessões do usuário: Cannot read properties of null (reading 'id')","stack":"TypeError: Cannot read properties of null (reading 'id')\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:143:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: Cannot read properties of null (reading 'id')","stack":"TypeError: Cannot read properties of null (reading 'id')\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:143:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: Cannot read properties of null (reading 'id')","stack":"TypeError: Cannot read properties of null (reading 'id')\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:145:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: Cannot read properties of null (reading 'id')","stack":"TypeError: Cannot read properties of null (reading 'id')\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:145:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: Cannot read properties of null (reading 'id')","stack":"TypeError: Cannot read properties of null (reading 'id')\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:137:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: Cannot read properties of null (reading 'id')","stack":"TypeError: Cannot read properties of null (reading 'id')\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:137:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: Cannot read properties of null (reading 'id')","stack":"TypeError: Cannot read properties of null (reading 'id')\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:134:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: Cannot read properties of null (reading 'id')","stack":"TypeError: Cannot read properties of null (reading 'id')\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:134:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: Cannot read properties of null (reading 'id')","stack":"TypeError: Cannot read properties of null (reading 'id')\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:136:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: Cannot read properties of null (reading 'id')","stack":"TypeError: Cannot read properties of null (reading 'id')\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:136:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"info","message":"Novo usuário registrado: thelma@mail.com"}
{"level":"info","message":"Usuário logado: thelma@mail.com"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"info","message":"Novo usuário registrado: gp@mail.com"}
{"level":"info","message":"Usuário logado: gp@mail.com"}
{"level":"info","message":"Usuário logado: thelma@mail.com"}
{"level":"info","message":"Usuário logado: gp@mail.com"}
{"level":"info","message":"Usuário logado: gp@mail.com"}
{"level":"info","message":"Usuário logado: thelma@mail.com"}
{"level":"info","message":"Usuário logado: thelma@mail.com"}
{"level":"error"}
{"level":"error"}
{"level":"error"}
{"level":"error"}
{"level":"error"}
{"level":"error"}
{"level":"error"}
{"level":"info","message":"Usuário logado: gp@mail.com"}
{"level":"info","message":"Usuário logado: gp@mail.com"}
{"level":"info","message":"Usuário logado: gp@mail.com"}
{"level":"info","message":"Usuário logado: thelma@mail.com"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"error","message":"Erro ao buscar sessões do usuário: role is not defined","stack":"ReferenceError: role is not defined\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:132:5)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:284:15\n    at router.process_params (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:47:12)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: role is not defined","stack":"ReferenceError: role is not defined\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:132:5)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:284:15\n    at router.process_params (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:47:12)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: role is not defined","stack":"ReferenceError: role is not defined\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:132:5)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:284:15\n    at router.process_params (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:47:12)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: role is not defined","stack":"ReferenceError: role is not defined\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:132:5)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:284:15\n    at router.process_params (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:47:12)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: role is not defined","stack":"ReferenceError: role is not defined\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:132:5)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:284:15\n    at router.process_params (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:47:12)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: role is not defined","stack":"ReferenceError: role is not defined\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:132:5)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:284:15\n    at router.process_params (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:47:12)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: Cannot read properties of null (reading 'id')","stack":"TypeError: Cannot read properties of null (reading 'id')\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:137:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: Cannot read properties of null (reading 'id')","stack":"TypeError: Cannot read properties of null (reading 'id')\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:137:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: Cannot read properties of null (reading 'id')","stack":"TypeError: Cannot read properties of null (reading 'id')\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:137:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: Cannot read properties of null (reading 'id')","stack":"TypeError: Cannot read properties of null (reading 'id')\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:137:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: Cannot read properties of null (reading 'id')","stack":"TypeError: Cannot read properties of null (reading 'id')\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:137:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: Cannot read properties of null (reading 'id')","stack":"TypeError: Cannot read properties of null (reading 'id')\n    at exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:137:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao agendar sessão: User is associated to Appointment using an alias. You've included an alias (therapist), but it does not match the alias(es) defined in your association (User).","name":"SequelizeEagerLoadingError","stack":"SequelizeEagerLoadingError: User is associated to Appointment using an alias. You've included an alias (therapist), but it does not match the alias(es) defined in your association (User).\n    at Appointment._getIncludedAssociation (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:574:15)\n    at Appointment._validateIncludedElement (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:502:53)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:421:37\n    at Array.map (<anonymous>)\n    at Appointment._validateIncludedElements (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:417:39)\n    at Appointment.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Appointment.findOne (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async Appointment.findByPk (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1221:12)\n    at async exports.create (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:51:28)"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"error","message":"Erro ao criar diário de emoções: title is not defined","stack":"ReferenceError: title is not defined\n    at exports.createEmotion (/home/paivs/Dev/Liszt/backend/controllers/journalController.js:111:7)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:284:15\n    at router.process_params (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:47:12)"}
{"level":"error","message":"Erro ao criar diário de emoções: title is not defined","stack":"ReferenceError: title is not defined\n    at exports.createEmotion (/home/paivs/Dev/Liszt/backend/controllers/journalController.js:111:7)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:284:15\n    at router.process_params (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:47:12)"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"info","message":"[63130e8c-81ab-4441-9719-589ce6bd8684] consulta destruída"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Usuário logado: gustavo.paiva.gp1@gmail.com"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Usuário logado: lucas@paciente.com"}
{"level":"info","message":"Usuário logado: lucas@paciente.com"}
{"level":"info","message":"[c6760099-d63a-4199-b3fb-58183f37ab27] consulta destruída"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Usuário logado: lucas@paciente.com"}
{"fields":null,"index":"appointment_patient_id_fkey","level":"error","message":"Erro ao agendar sessão: insert or update on table \"appointment\" violates foreign key constraint \"appointment_patient_id_fkey\"","name":"SequelizeForeignKeyConstraintError","original":{"code":"23503","constraint":"appointment_patient_id_fkey","detail":"Key (patient_id)=(21d6b315-377f-42e5-82fc-186c1c6e5e7e) is not present in table \"patient\".","file":"ri_triggers.c","length":312,"line":"2596","name":"error","parameters":["ba3fefa6-49fb-46f3-b78b-2835beac0be0","f21e6f6b-9cdf-4db4-ae2f-ed4af8d1f89d","21d6b315-377f-42e5-82fc-186c1c6e5e7e","2025-07-17 14:00:00.000 +00:00","2025-07-10 03:46:04.902 +00:00","2025-07-10 03:46:04.902 +00:00"],"routine":"ri_ReportViolation","schema":"public","severity":"ERROR","sql":"INSERT INTO \"appointment\" (\"id\",\"therapist_id\",\"patient_id\",\"scheduled_time\",\"created_at\",\"updated_at\") VALUES ($1,$2,$3,$4,$5,$6) RETURNING \"id\",\"therapist_id\",\"patient_id\",\"scheduled_time\",\"created_at\",\"updated_at\";","table":"appointment"},"parameters":["ba3fefa6-49fb-46f3-b78b-2835beac0be0","f21e6f6b-9cdf-4db4-ae2f-ed4af8d1f89d","21d6b315-377f-42e5-82fc-186c1c6e5e7e","2025-07-17 14:00:00.000 +00:00","2025-07-10 03:46:04.902 +00:00","2025-07-10 03:46:04.902 +00:00"],"parent":{"code":"23503","constraint":"appointment_patient_id_fkey","detail":"Key (patient_id)=(21d6b315-377f-42e5-82fc-186c1c6e5e7e) is not present in table \"patient\".","file":"ri_triggers.c","length":312,"line":"2596","name":"error","parameters":["ba3fefa6-49fb-46f3-b78b-2835beac0be0","f21e6f6b-9cdf-4db4-ae2f-ed4af8d1f89d","21d6b315-377f-42e5-82fc-186c1c6e5e7e","2025-07-17 14:00:00.000 +00:00","2025-07-10 03:46:04.902 +00:00","2025-07-10 03:46:04.902 +00:00"],"routine":"ri_ReportViolation","schema":"public","severity":"ERROR","sql":"INSERT INTO \"appointment\" (\"id\",\"therapist_id\",\"patient_id\",\"scheduled_time\",\"created_at\",\"updated_at\") VALUES ($1,$2,$3,$4,$5,$6) RETURNING \"id\",\"therapist_id\",\"patient_id\",\"scheduled_time\",\"created_at\",\"updated_at\";","table":"appointment"},"sql":"INSERT INTO \"appointment\" (\"id\",\"therapist_id\",\"patient_id\",\"scheduled_time\",\"created_at\",\"updated_at\") VALUES ($1,$2,$3,$4,$5,$6) RETURNING \"id\",\"therapist_id\",\"patient_id\",\"scheduled_time\",\"created_at\",\"updated_at\";","stack":"Error\n    at Query.run (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async PostgresQueryInterface.insert (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async model.save (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async Appointment.create (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async exports.create (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:42:32)","table":"appointment"}
{"fields":null,"index":"appointment_patient_id_fkey","level":"error","message":"Erro ao agendar sessão: insert or update on table \"appointment\" violates foreign key constraint \"appointment_patient_id_fkey\"","name":"SequelizeForeignKeyConstraintError","original":{"code":"23503","constraint":"appointment_patient_id_fkey","detail":"Key (patient_id)=(21d6b315-377f-42e5-82fc-186c1c6e5e7e) is not present in table \"patient\".","file":"ri_triggers.c","length":312,"line":"2596","name":"error","parameters":["4472be20-4e17-4b50-b91f-ed816ed9194f","f21e6f6b-9cdf-4db4-ae2f-ed4af8d1f89d","21d6b315-377f-42e5-82fc-186c1c6e5e7e","2025-07-17 14:00:00.000 +00:00","2025-07-10 03:48:26.230 +00:00","2025-07-10 03:48:26.230 +00:00"],"routine":"ri_ReportViolation","schema":"public","severity":"ERROR","sql":"INSERT INTO \"appointment\" (\"id\",\"therapist_id\",\"patient_id\",\"scheduled_time\",\"created_at\",\"updated_at\") VALUES ($1,$2,$3,$4,$5,$6) RETURNING \"id\",\"therapist_id\",\"patient_id\",\"scheduled_time\",\"created_at\",\"updated_at\";","table":"appointment"},"parameters":["4472be20-4e17-4b50-b91f-ed816ed9194f","f21e6f6b-9cdf-4db4-ae2f-ed4af8d1f89d","21d6b315-377f-42e5-82fc-186c1c6e5e7e","2025-07-17 14:00:00.000 +00:00","2025-07-10 03:48:26.230 +00:00","2025-07-10 03:48:26.230 +00:00"],"parent":{"code":"23503","constraint":"appointment_patient_id_fkey","detail":"Key (patient_id)=(21d6b315-377f-42e5-82fc-186c1c6e5e7e) is not present in table \"patient\".","file":"ri_triggers.c","length":312,"line":"2596","name":"error","parameters":["4472be20-4e17-4b50-b91f-ed816ed9194f","f21e6f6b-9cdf-4db4-ae2f-ed4af8d1f89d","21d6b315-377f-42e5-82fc-186c1c6e5e7e","2025-07-17 14:00:00.000 +00:00","2025-07-10 03:48:26.230 +00:00","2025-07-10 03:48:26.230 +00:00"],"routine":"ri_ReportViolation","schema":"public","severity":"ERROR","sql":"INSERT INTO \"appointment\" (\"id\",\"therapist_id\",\"patient_id\",\"scheduled_time\",\"created_at\",\"updated_at\") VALUES ($1,$2,$3,$4,$5,$6) RETURNING \"id\",\"therapist_id\",\"patient_id\",\"scheduled_time\",\"created_at\",\"updated_at\";","table":"appointment"},"sql":"INSERT INTO \"appointment\" (\"id\",\"therapist_id\",\"patient_id\",\"scheduled_time\",\"created_at\",\"updated_at\") VALUES ($1,$2,$3,$4,$5,$6) RETURNING \"id\",\"therapist_id\",\"patient_id\",\"scheduled_time\",\"created_at\",\"updated_at\";","stack":"Error\n    at Query.run (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async PostgresQueryInterface.insert (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async model.save (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async Appointment.create (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async exports.create (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:42:32)","table":"appointment"}
{"level":"info","message":"Usuário logado: lucas@paciente.com"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Novo usuário registrado: gogo@boy.com"}
{"level":"info","message":"Usuário logado: gogo@boy.com"}
{"level":"error"}
{"level":"error"}
{"level":"error"}
{"level":"error"}
{"level":"error"}
{"level":"info","message":"Paciente registrado com sucesso: 2a552c0e-cbee-4e04-8e2e-33db702620a8"}
{"level":"info","message":"Novo usuário registrado: roberval@mail.com"}
{"level":"info","message":"Usuário logado: roberval@mail.com"}
{"errors":[{"instance":{"address":"1","cpf":"1","created_at":"2025-07-11T00:51:59.528Z","email":"roberval@mail.com","emergency_contact_name":"1","emergency_contact_phone":"1","id":"f1537650-a4e0-4751-ab4a-33102b212b16","name":"Roberval Nunes","phone":"1","updated_at":"2025-07-10T21:52:39.283Z","user_id":"abc90784-88c5-482b-86e1-a3e875e8b28e"},"message":"cpf must be unique","origin":"DB","path":"cpf","type":"unique violation","validatorArgs":[],"validatorKey":"not_unique","validatorName":null,"value":"1"}],"fields":{"cpf":"1"},"level":"error","name":"SequelizeUniqueConstraintError","original":{"code":"23505","constraint":"patient_cpf_key","detail":"Key (cpf)=(1) already exists.","file":"nbtinsert.c","length":193,"line":"664","name":"error","parameters":["1","1","1","1","1","2025-07-10 21:52:39.283 +00:00","f1537650-a4e0-4751-ab4a-33102b212b16"],"routine":"_bt_check_unique","schema":"public","severity":"ERROR","sql":"UPDATE \"patient\" SET \"cpf\"=$1,\"phone\"=$2,\"emergency_contact_name\"=$3,\"emergency_contact_phone\"=$4,\"address\"=$5,\"updated_at\"=$6 WHERE \"id\" = $7","table":"patient"},"parent":{"code":"23505","constraint":"patient_cpf_key","detail":"Key (cpf)=(1) already exists.","file":"nbtinsert.c","length":193,"line":"664","name":"error","parameters":["1","1","1","1","1","2025-07-10 21:52:39.283 +00:00","f1537650-a4e0-4751-ab4a-33102b212b16"],"routine":"_bt_check_unique","schema":"public","severity":"ERROR","sql":"UPDATE \"patient\" SET \"cpf\"=$1,\"phone\"=$2,\"emergency_contact_name\"=$3,\"emergency_contact_phone\"=$4,\"address\"=$5,\"updated_at\"=$6 WHERE \"id\" = $7","table":"patient"},"sql":"UPDATE \"patient\" SET \"cpf\"=$1,\"phone\"=$2,\"emergency_contact_name\"=$3,\"emergency_contact_phone\"=$4,\"address\"=$5,\"updated_at\"=$6 WHERE \"id\" = $7"}
{"errors":[{"instance":{"address":"1","cpf":"1","created_at":"2025-07-11T00:51:59.528Z","email":"roberval@mail.com","emergency_contact_name":"1","emergency_contact_phone":"1","id":"f1537650-a4e0-4751-ab4a-33102b212b16","name":"Roberval Nunes","phone":"1","updated_at":"2025-07-10T21:53:29.605Z","user_id":"abc90784-88c5-482b-86e1-a3e875e8b28e"},"message":"cpf must be unique","origin":"DB","path":"cpf","type":"unique violation","validatorArgs":[],"validatorKey":"not_unique","validatorName":null,"value":"1"}],"fields":{"cpf":"1"},"level":"error","name":"SequelizeUniqueConstraintError","original":{"code":"23505","constraint":"patient_cpf_key","detail":"Key (cpf)=(1) already exists.","file":"nbtinsert.c","length":193,"line":"664","name":"error","parameters":["1","1","1","1","1","2025-07-10 21:53:29.605 +00:00","f1537650-a4e0-4751-ab4a-33102b212b16"],"routine":"_bt_check_unique","schema":"public","severity":"ERROR","sql":"UPDATE \"patient\" SET \"cpf\"=$1,\"phone\"=$2,\"emergency_contact_name\"=$3,\"emergency_contact_phone\"=$4,\"address\"=$5,\"updated_at\"=$6 WHERE \"id\" = $7","table":"patient"},"parent":{"code":"23505","constraint":"patient_cpf_key","detail":"Key (cpf)=(1) already exists.","file":"nbtinsert.c","length":193,"line":"664","name":"error","parameters":["1","1","1","1","1","2025-07-10 21:53:29.605 +00:00","f1537650-a4e0-4751-ab4a-33102b212b16"],"routine":"_bt_check_unique","schema":"public","severity":"ERROR","sql":"UPDATE \"patient\" SET \"cpf\"=$1,\"phone\"=$2,\"emergency_contact_name\"=$3,\"emergency_contact_phone\"=$4,\"address\"=$5,\"updated_at\"=$6 WHERE \"id\" = $7","table":"patient"},"sql":"UPDATE \"patient\" SET \"cpf\"=$1,\"phone\"=$2,\"emergency_contact_name\"=$3,\"emergency_contact_phone\"=$4,\"address\"=$5,\"updated_at\"=$6 WHERE \"id\" = $7"}
{"errors":[{"instance":{"address":"1","cpf":"1","created_at":"2025-07-11T00:51:59.528Z","email":"roberval@mail.com","emergency_contact_name":"1","emergency_contact_phone":"1","id":"f1537650-a4e0-4751-ab4a-33102b212b16","name":"Roberval Nunes","phone":"1","updated_at":"2025-07-10T21:53:42.284Z","user_id":"abc90784-88c5-482b-86e1-a3e875e8b28e"},"message":"cpf must be unique","origin":"DB","path":"cpf","type":"unique violation","validatorArgs":[],"validatorKey":"not_unique","validatorName":null,"value":"1"}],"fields":{"cpf":"1"},"level":"error","name":"SequelizeUniqueConstraintError","original":{"code":"23505","constraint":"patient_cpf_key","detail":"Key (cpf)=(1) already exists.","file":"nbtinsert.c","length":193,"line":"664","name":"error","parameters":["1","1","1","1","1","2025-07-10 21:53:42.284 +00:00","f1537650-a4e0-4751-ab4a-33102b212b16"],"routine":"_bt_check_unique","schema":"public","severity":"ERROR","sql":"UPDATE \"patient\" SET \"cpf\"=$1,\"phone\"=$2,\"emergency_contact_name\"=$3,\"emergency_contact_phone\"=$4,\"address\"=$5,\"updated_at\"=$6 WHERE \"id\" = $7","table":"patient"},"parent":{"code":"23505","constraint":"patient_cpf_key","detail":"Key (cpf)=(1) already exists.","file":"nbtinsert.c","length":193,"line":"664","name":"error","parameters":["1","1","1","1","1","2025-07-10 21:53:42.284 +00:00","f1537650-a4e0-4751-ab4a-33102b212b16"],"routine":"_bt_check_unique","schema":"public","severity":"ERROR","sql":"UPDATE \"patient\" SET \"cpf\"=$1,\"phone\"=$2,\"emergency_contact_name\"=$3,\"emergency_contact_phone\"=$4,\"address\"=$5,\"updated_at\"=$6 WHERE \"id\" = $7","table":"patient"},"sql":"UPDATE \"patient\" SET \"cpf\"=$1,\"phone\"=$2,\"emergency_contact_name\"=$3,\"emergency_contact_phone\"=$4,\"address\"=$5,\"updated_at\"=$6 WHERE \"id\" = $7"}
{"level":"info","message":"Paciente registrado com sucesso: f1537650-a4e0-4751-ab4a-33102b212b16"}
{"level":"info","message":"Novo usuário registrado: teste@mail.com"}
{"level":"info","message":"Usuário logado: teste@mail.com"}
{"level":"info","message":"Paciente registrado com sucesso: 9bdc1ca7-9b95-41d2-9f6e-301b3936fa87"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"[72993136-4180-4db2-8390-e18419178ba4] consulta destruída"}
{"level":"info","message":"Novo usuário registrado: ju@mail.com"}
{"level":"info","message":"Usuário logado: ju@mail.com"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Usuário logado: lucas@paciente.com"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"error","message":"Erro ao buscar sessões do usuário: WHERE parameter \"patient_id\" has invalid \"undefined\" value","stack":"Error: WHERE parameter \"patient_id\" has invalid \"undefined\" value\n    at PostgresQueryGenerator.whereItemQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1746:13)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1737:25\n    at Array.forEach (<anonymous>)\n    at PostgresQueryGenerator.whereItemsQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1735:35)\n    at PostgresQueryGenerator.getWhereConditions (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:2078:19)\n    at PostgresQueryGenerator.selectQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:991:28)\n    at PostgresQueryInterface.select (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:59)\n    at Appointment.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1140:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:196:22)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: WHERE parameter \"patient_id\" has invalid \"undefined\" value","stack":"Error: WHERE parameter \"patient_id\" has invalid \"undefined\" value\n    at PostgresQueryGenerator.whereItemQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1746:13)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1737:25\n    at Array.forEach (<anonymous>)\n    at PostgresQueryGenerator.whereItemsQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1735:35)\n    at PostgresQueryGenerator.getWhereConditions (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:2078:19)\n    at PostgresQueryGenerator.selectQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:991:28)\n    at PostgresQueryInterface.select (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:59)\n    at Appointment.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1140:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:196:22)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: WHERE parameter \"patient_id\" has invalid \"undefined\" value","stack":"Error: WHERE parameter \"patient_id\" has invalid \"undefined\" value\n    at PostgresQueryGenerator.whereItemQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1746:13)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1737:25\n    at Array.forEach (<anonymous>)\n    at PostgresQueryGenerator.whereItemsQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1735:35)\n    at PostgresQueryGenerator.getWhereConditions (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:2078:19)\n    at PostgresQueryGenerator.selectQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:991:28)\n    at PostgresQueryInterface.select (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:59)\n    at Appointment.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1140:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:196:22)"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"error","message":"Erro ao buscar sessões do usuário: WHERE parameter \"patient_id\" has invalid \"undefined\" value","stack":"Error: WHERE parameter \"patient_id\" has invalid \"undefined\" value\n    at PostgresQueryGenerator.whereItemQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1746:13)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1737:25\n    at Array.forEach (<anonymous>)\n    at PostgresQueryGenerator.whereItemsQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1735:35)\n    at PostgresQueryGenerator.getWhereConditions (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:2078:19)\n    at PostgresQueryGenerator.selectQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:991:28)\n    at PostgresQueryInterface.select (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:59)\n    at Appointment.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1140:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:196:22)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: WHERE parameter \"patient_id\" has invalid \"undefined\" value","stack":"Error: WHERE parameter \"patient_id\" has invalid \"undefined\" value\n    at PostgresQueryGenerator.whereItemQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1746:13)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1737:25\n    at Array.forEach (<anonymous>)\n    at PostgresQueryGenerator.whereItemsQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1735:35)\n    at PostgresQueryGenerator.getWhereConditions (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:2078:19)\n    at PostgresQueryGenerator.selectQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:991:28)\n    at PostgresQueryInterface.select (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:59)\n    at Appointment.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1140:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:196:22)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: WHERE parameter \"patient_id\" has invalid \"undefined\" value","stack":"Error: WHERE parameter \"patient_id\" has invalid \"undefined\" value\n    at PostgresQueryGenerator.whereItemQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1746:13)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1737:25\n    at Array.forEach (<anonymous>)\n    at PostgresQueryGenerator.whereItemsQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1735:35)\n    at PostgresQueryGenerator.getWhereConditions (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:2078:19)\n    at PostgresQueryGenerator.selectQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:991:28)\n    at PostgresQueryInterface.select (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:59)\n    at Appointment.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1140:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:196:22)"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"error","message":"Erro ao buscar sessões do usuário: WHERE parameter \"patient_id\" has invalid \"undefined\" value","stack":"Error: WHERE parameter \"patient_id\" has invalid \"undefined\" value\n    at PostgresQueryGenerator.whereItemQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1746:13)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1737:25\n    at Array.forEach (<anonymous>)\n    at PostgresQueryGenerator.whereItemsQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1735:35)\n    at PostgresQueryGenerator.getWhereConditions (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:2078:19)\n    at PostgresQueryGenerator.selectQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:991:28)\n    at PostgresQueryInterface.select (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:59)\n    at Appointment.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1140:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:196:22)"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Usuário logado: lucas@paciente.com"}
{"level":"error","message":"Erro ao buscar sessões do usuário: WHERE parameter \"patient_id\" has invalid \"undefined\" value","stack":"Error: WHERE parameter \"patient_id\" has invalid \"undefined\" value\n    at PostgresQueryGenerator.whereItemQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1746:13)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1737:25\n    at Array.forEach (<anonymous>)\n    at PostgresQueryGenerator.whereItemsQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1735:35)\n    at PostgresQueryGenerator.getWhereConditions (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:2078:19)\n    at PostgresQueryGenerator.selectQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:991:28)\n    at PostgresQueryInterface.select (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:59)\n    at Appointment.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1140:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:196:22)"}
{"level":"error","message":"Erro ao buscar sessões do usuário: WHERE parameter \"patient_id\" has invalid \"undefined\" value","stack":"Error: WHERE parameter \"patient_id\" has invalid \"undefined\" value\n    at PostgresQueryGenerator.whereItemQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1746:13)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1737:25\n    at Array.forEach (<anonymous>)\n    at PostgresQueryGenerator.whereItemsQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1735:35)\n    at PostgresQueryGenerator.getWhereConditions (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:2078:19)\n    at PostgresQueryGenerator.selectQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:991:28)\n    at PostgresQueryInterface.select (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:59)\n    at Appointment.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1140:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.getAllByUser (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:196:22)"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"info","message":"Usuário logado: admin@laurem.com.br"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"error","message":"Erro ao buscar configurações de agendamento do terapeuta: Therapist is not defined","stack":"ReferenceError: Therapist is not defined\n    at exports.getAppointmentSettingsByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:329:23)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:284:15\n    at router.process_params (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:47:12)"}
{"level":"error","message":"Erro ao buscar configurações de agendamento do terapeuta: Therapist is not defined","stack":"ReferenceError: Therapist is not defined\n    at exports.getAppointmentSettingsByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:329:23)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:284:15\n    at router.process_params (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:47:12)"}
{"level":"error","message":"Erro ao buscar configurações de agendamento do terapeuta: WHERE parameter \"user_id\" has invalid \"undefined\" value","stack":"Error: WHERE parameter \"user_id\" has invalid \"undefined\" value\n    at PostgresQueryGenerator.whereItemQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1746:13)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1737:25\n    at Array.forEach (<anonymous>)\n    at PostgresQueryGenerator.whereItemsQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1735:35)\n    at PostgresQueryGenerator.getWhereConditions (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:2078:19)\n    at PostgresQueryGenerator.selectQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:991:28)\n    at PostgresQueryInterface.select (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:59)\n    at Therapist.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1140:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Therapist.findOne (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1240:12)"}
{"level":"error","message":"Erro ao buscar configurações de agendamento do terapeuta: WHERE parameter \"user_id\" has invalid \"undefined\" value","stack":"Error: WHERE parameter \"user_id\" has invalid \"undefined\" value\n    at PostgresQueryGenerator.whereItemQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1746:13)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1737:25\n    at Array.forEach (<anonymous>)\n    at PostgresQueryGenerator.whereItemsQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1735:35)\n    at PostgresQueryGenerator.getWhereConditions (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:2078:19)\n    at PostgresQueryGenerator.selectQuery (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-generator.js:991:28)\n    at PostgresQueryInterface.select (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:59)\n    at Therapist.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1140:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Therapist.findOne (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1240:12)"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"fields":null,"index":"appointment_therapist_id_fkey","level":"error","message":"Erro ao agendar sessão: insert or update on table \"appointment\" violates foreign key constraint \"appointment_therapist_id_fkey\"","name":"SequelizeForeignKeyConstraintError","original":{"code":"23503","constraint":"appointment_therapist_id_fkey","detail":"Key (therapist_id)=(04f69c03-1aa3-4ade-833c-02dd32b107f2) is not present in table \"users\".","file":"ri_triggers.c","length":316,"line":"2596","name":"error","parameters":["7342d4a1-0800-49c9-9720-d7af5579fc5f","04f69c03-1aa3-4ade-833c-02dd32b107f2","43fe8546-1fca-492a-b5cf-6ef0477a6eda","individual","pendente","2025-07-14 11:00:00.000 +00:00","presencial","emerald","2025-07-14 13:37:36.171 +00:00","2025-07-14 13:37:36.171 +00:00"],"routine":"ri_ReportViolation","schema":"public","severity":"ERROR","sql":"INSERT INTO \"appointment\" (\"id\",\"therapist_id\",\"patient_id\",\"type_appointment\",\"status_appointment\",\"scheduled_time\",\"location\",\"label\",\"created_at\",\"updated_at\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING \"id\",\"therapist_id\",\"patient_id\",\"type_appointment\",\"status_appointment\",\"scheduled_time\",\"location\",\"label\",\"created_at\",\"updated_at\";","table":"appointment"},"parameters":["7342d4a1-0800-49c9-9720-d7af5579fc5f","04f69c03-1aa3-4ade-833c-02dd32b107f2","43fe8546-1fca-492a-b5cf-6ef0477a6eda","individual","pendente","2025-07-14 11:00:00.000 +00:00","presencial","emerald","2025-07-14 13:37:36.171 +00:00","2025-07-14 13:37:36.171 +00:00"],"parent":{"code":"23503","constraint":"appointment_therapist_id_fkey","detail":"Key (therapist_id)=(04f69c03-1aa3-4ade-833c-02dd32b107f2) is not present in table \"users\".","file":"ri_triggers.c","length":316,"line":"2596","name":"error","parameters":["7342d4a1-0800-49c9-9720-d7af5579fc5f","04f69c03-1aa3-4ade-833c-02dd32b107f2","43fe8546-1fca-492a-b5cf-6ef0477a6eda","individual","pendente","2025-07-14 11:00:00.000 +00:00","presencial","emerald","2025-07-14 13:37:36.171 +00:00","2025-07-14 13:37:36.171 +00:00"],"routine":"ri_ReportViolation","schema":"public","severity":"ERROR","sql":"INSERT INTO \"appointment\" (\"id\",\"therapist_id\",\"patient_id\",\"type_appointment\",\"status_appointment\",\"scheduled_time\",\"location\",\"label\",\"created_at\",\"updated_at\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING \"id\",\"therapist_id\",\"patient_id\",\"type_appointment\",\"status_appointment\",\"scheduled_time\",\"location\",\"label\",\"created_at\",\"updated_at\";","table":"appointment"},"sql":"INSERT INTO \"appointment\" (\"id\",\"therapist_id\",\"patient_id\",\"type_appointment\",\"status_appointment\",\"scheduled_time\",\"location\",\"label\",\"created_at\",\"updated_at\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING \"id\",\"therapist_id\",\"patient_id\",\"type_appointment\",\"status_appointment\",\"scheduled_time\",\"location\",\"label\",\"created_at\",\"updated_at\";","stack":"Error\n    at Query.run (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async PostgresQueryInterface.insert (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async model.save (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async Appointment.create (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async exports.createByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:105:32)","table":"appointment"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"error","message":"Erro ao buscar sessões: User is not associated to Appointment!","name":"SequelizeEagerLoadingError","stack":"SequelizeEagerLoadingError: User is not associated to Appointment!\n    at Appointment._getIncludedAssociation (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:565:13)\n    at Appointment._validateIncludedElement (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:502:53)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:421:37\n    at Array.map (<anonymous>)\n    at Appointment._validateIncludedElements (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:417:39)\n    at Appointment.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Appointment.pagination [as paginate] (/home/paivs/Dev/Liszt/backend/node_modules/sequelize-paginate/src/index.js:78:20)\n    at async exports.listAppointmentsByDateRange (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:352:36)"}
{"level":"error","message":"Erro ao buscar sessões: User is not associated to Appointment!","name":"SequelizeEagerLoadingError","stack":"SequelizeEagerLoadingError: User is not associated to Appointment!\n    at Appointment._getIncludedAssociation (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:565:13)\n    at Appointment._validateIncludedElement (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:502:53)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:421:37\n    at Array.map (<anonymous>)\n    at Appointment._validateIncludedElements (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:417:39)\n    at Appointment.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Appointment.pagination [as paginate] (/home/paivs/Dev/Liszt/backend/node_modules/sequelize-paginate/src/index.js:78:20)\n    at async exports.listAppointmentsByDateRange (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:352:36)"}
{"level":"error","message":"Erro ao agendar sessão: User is not associated to Appointment!","name":"SequelizeEagerLoadingError","stack":"SequelizeEagerLoadingError: User is not associated to Appointment!\n    at Appointment._getIncludedAssociation (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:565:13)\n    at Appointment._validateIncludedElement (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:502:53)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:421:37\n    at Array.map (<anonymous>)\n    at Appointment._validateIncludedElements (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:417:39)\n    at Appointment.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Appointment.findOne (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async Appointment.findByPk (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1221:12)\n    at async exports.createByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:116:28)"}
{"level":"error","message":"Erro ao agendar sessão: User is not associated to Appointment!","name":"SequelizeEagerLoadingError","stack":"SequelizeEagerLoadingError: User is not associated to Appointment!\n    at Appointment._getIncludedAssociation (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:565:13)\n    at Appointment._validateIncludedElement (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:502:53)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:421:37\n    at Array.map (<anonymous>)\n    at Appointment._validateIncludedElements (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:417:39)\n    at Appointment.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Appointment.findOne (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async Appointment.findByPk (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1221:12)\n    at async exports.createByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:116:28)"}
{"level":"error","message":"Erro ao agendar sessão: column Therapist.role does not exist","name":"SequelizeDatabaseError","original":{"code":"42703","file":"parse_relation.c","length":113,"line":"3665","name":"error","position":"411","routine":"errorMissingColumn","severity":"ERROR","sql":"SELECT \"Appointment\".\"id\", \"Appointment\".\"therapist_id\", \"Appointment\".\"patient_id\", \"Appointment\".\"type_appointment\", \"Appointment\".\"status_appointment\", \"Appointment\".\"scheduled_time\", \"Appointment\".\"location\", \"Appointment\".\"label\", \"Appointment\".\"created_at\", \"Appointment\".\"updated_at\", \"Therapist\".\"id\" AS \"Therapist.id\", \"Therapist\".\"name\" AS \"Therapist.name\", \"Therapist\".\"email\" AS \"Therapist.email\", \"Therapist\".\"role\" AS \"Therapist.role\", \"Patient\".\"id\" AS \"Patient.id\", \"Patient\".\"name\" AS \"Patient.name\", \"Patient\".\"email\" AS \"Patient.email\", \"Patient\".\"cpf\" AS \"Patient.cpf\", \"Patient\".\"phone\" AS \"Patient.phone\" FROM \"appointment\" AS \"Appointment\" LEFT OUTER JOIN \"therapist\" AS \"Therapist\" ON \"Appointment\".\"therapist_id\" = \"Therapist\".\"id\" LEFT OUTER JOIN \"patient\" AS \"Patient\" ON \"Appointment\".\"patient_id\" = \"Patient\".\"id\" WHERE \"Appointment\".\"id\" = '92b5a229-118f-476d-bad8-e1ad3a213cec' ORDER BY \"Appointment\".\"scheduled_time\" ASC;"},"parameters":{},"parent":{"code":"42703","file":"parse_relation.c","length":113,"line":"3665","name":"error","position":"411","routine":"errorMissingColumn","severity":"ERROR","sql":"SELECT \"Appointment\".\"id\", \"Appointment\".\"therapist_id\", \"Appointment\".\"patient_id\", \"Appointment\".\"type_appointment\", \"Appointment\".\"status_appointment\", \"Appointment\".\"scheduled_time\", \"Appointment\".\"location\", \"Appointment\".\"label\", \"Appointment\".\"created_at\", \"Appointment\".\"updated_at\", \"Therapist\".\"id\" AS \"Therapist.id\", \"Therapist\".\"name\" AS \"Therapist.name\", \"Therapist\".\"email\" AS \"Therapist.email\", \"Therapist\".\"role\" AS \"Therapist.role\", \"Patient\".\"id\" AS \"Patient.id\", \"Patient\".\"name\" AS \"Patient.name\", \"Patient\".\"email\" AS \"Patient.email\", \"Patient\".\"cpf\" AS \"Patient.cpf\", \"Patient\".\"phone\" AS \"Patient.phone\" FROM \"appointment\" AS \"Appointment\" LEFT OUTER JOIN \"therapist\" AS \"Therapist\" ON \"Appointment\".\"therapist_id\" = \"Therapist\".\"id\" LEFT OUTER JOIN \"patient\" AS \"Patient\" ON \"Appointment\".\"patient_id\" = \"Patient\".\"id\" WHERE \"Appointment\".\"id\" = '92b5a229-118f-476d-bad8-e1ad3a213cec' ORDER BY \"Appointment\".\"scheduled_time\" ASC;"},"sql":"SELECT \"Appointment\".\"id\", \"Appointment\".\"therapist_id\", \"Appointment\".\"patient_id\", \"Appointment\".\"type_appointment\", \"Appointment\".\"status_appointment\", \"Appointment\".\"scheduled_time\", \"Appointment\".\"location\", \"Appointment\".\"label\", \"Appointment\".\"created_at\", \"Appointment\".\"updated_at\", \"Therapist\".\"id\" AS \"Therapist.id\", \"Therapist\".\"name\" AS \"Therapist.name\", \"Therapist\".\"email\" AS \"Therapist.email\", \"Therapist\".\"role\" AS \"Therapist.role\", \"Patient\".\"id\" AS \"Patient.id\", \"Patient\".\"name\" AS \"Patient.name\", \"Patient\".\"email\" AS \"Patient.email\", \"Patient\".\"cpf\" AS \"Patient.cpf\", \"Patient\".\"phone\" AS \"Patient.phone\" FROM \"appointment\" AS \"Appointment\" LEFT OUTER JOIN \"therapist\" AS \"Therapist\" ON \"Appointment\".\"therapist_id\" = \"Therapist\".\"id\" LEFT OUTER JOIN \"patient\" AS \"Patient\" ON \"Appointment\".\"patient_id\" = \"Patient\".\"id\" WHERE \"Appointment\".\"id\" = '92b5a229-118f-476d-bad8-e1ad3a213cec' ORDER BY \"Appointment\".\"scheduled_time\" ASC;","stack":"Error\n    at Query.run (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async PostgresQueryInterface.select (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async Appointment.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async Appointment.findOne (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async Appointment.findByPk (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1221:12)\n    at async exports.createByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:116:28)"}
{"level":"error","message":"Erro ao atualizar sessão: patient_id is not defined","stack":"ReferenceError: patient_id is not defined\n    at exports.updateByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:158:44)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"error","message":"Erro ao buscar sessões: date is not defined","stack":"ReferenceError: date is not defined\n    at exports.listAppointmentsByDateRange (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:379:31)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:284:15\n    at router.process_params (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/router/index.js:47:12)"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"error","message":"Erro ao buscar sessões: OFFSET must not be negative","name":"SequelizeDatabaseError","original":{"code":"2201X","file":"nodeLimit.c","length":91,"line":"372","name":"error","routine":"recompute_limits","severity":"ERROR","sql":"SELECT \"Appointment\".\"id\", \"Appointment\".\"therapist_id\", \"Appointment\".\"patient_id\", \"Appointment\".\"type_appointment\", \"Appointment\".\"status_appointment\", \"Appointment\".\"scheduled_time\", \"Appointment\".\"location\", \"Appointment\".\"label\", \"Appointment\".\"created_at\", \"Appointment\".\"updated_at\", \"patient\".\"id\" AS \"patient.id\", \"patient\".\"name\" AS \"patient.name\", \"patient\".\"email\" AS \"patient.email\" FROM \"appointment\" AS \"Appointment\" LEFT OUTER JOIN \"patient\" AS \"patient\" ON \"Appointment\".\"patient_id\" = \"patient\".\"id\" WHERE \"Appointment\".\"therapist_id\" = '75c67405-50ad-42ef-a429-cd04d6390931' ORDER BY \"Appointment\".\"scheduled_time\" ASC LIMIT 10 OFFSET -10;"},"parameters":{},"parent":{"code":"2201X","file":"nodeLimit.c","length":91,"line":"372","name":"error","routine":"recompute_limits","severity":"ERROR","sql":"SELECT \"Appointment\".\"id\", \"Appointment\".\"therapist_id\", \"Appointment\".\"patient_id\", \"Appointment\".\"type_appointment\", \"Appointment\".\"status_appointment\", \"Appointment\".\"scheduled_time\", \"Appointment\".\"location\", \"Appointment\".\"label\", \"Appointment\".\"created_at\", \"Appointment\".\"updated_at\", \"patient\".\"id\" AS \"patient.id\", \"patient\".\"name\" AS \"patient.name\", \"patient\".\"email\" AS \"patient.email\" FROM \"appointment\" AS \"Appointment\" LEFT OUTER JOIN \"patient\" AS \"patient\" ON \"Appointment\".\"patient_id\" = \"patient\".\"id\" WHERE \"Appointment\".\"therapist_id\" = '75c67405-50ad-42ef-a429-cd04d6390931' ORDER BY \"Appointment\".\"scheduled_time\" ASC LIMIT 10 OFFSET -10;"},"sql":"SELECT \"Appointment\".\"id\", \"Appointment\".\"therapist_id\", \"Appointment\".\"patient_id\", \"Appointment\".\"type_appointment\", \"Appointment\".\"status_appointment\", \"Appointment\".\"scheduled_time\", \"Appointment\".\"location\", \"Appointment\".\"label\", \"Appointment\".\"created_at\", \"Appointment\".\"updated_at\", \"patient\".\"id\" AS \"patient.id\", \"patient\".\"name\" AS \"patient.name\", \"patient\".\"email\" AS \"patient.email\" FROM \"appointment\" AS \"Appointment\" LEFT OUTER JOIN \"patient\" AS \"patient\" ON \"Appointment\".\"patient_id\" = \"patient\".\"id\" WHERE \"Appointment\".\"therapist_id\" = '75c67405-50ad-42ef-a429-cd04d6390931' ORDER BY \"Appointment\".\"scheduled_time\" ASC LIMIT 10 OFFSET -10;","stack":"Error\n    at Query.run (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async PostgresQueryInterface.select (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async Appointment.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async Appointment.pagination [as paginate] (/home/paivs/Dev/Liszt/backend/node_modules/sequelize-paginate/src/index.js:78:20)\n    at async exports.listAppointmentsByDateRange (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:454:25)"}
{"level":"info","message":"[92b5a229-118f-476d-bad8-e1ad3a213cec] consulta destruída"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"error","message":"Erro ao agendar sessão: normalizedDays is not defined","stack":"ReferenceError: normalizedDays is not defined\n    at validateAppointmentAgainstTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:617:15)\n    at exports.createByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:113:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"error","message":"Erro ao agendar sessão: Value medium out of range for Date.prototype.toLocaleDateString options property weekday","stack":"RangeError: Value medium out of range for Date.prototype.toLocaleDateString options property weekday\n    at Date.toLocaleDateString (<anonymous>)\n    at validateAppointmentAgainstTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:610:31)\n    at exports.createByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:113:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"info","message":"[da1544c4-4167-464b-b9be-a983a817d0d0] consulta destruída"}
{"level":"info","message":"[abf3df79-5cf2-48dd-a75d-2aa2ebde58ca] consulta destruída"}
{"level":"info","message":"[1416e217-1688-4a0e-8b8b-d6c01dc69b26] consulta destruída"}
{"level":"info","message":"[61292e99-1691-4e70-a1b9-2349cdf77320] consulta destruída"}
{"level":"info","message":"[6bff6106-5a14-4237-91cc-a843e43984d3] consulta destruída"}
{"level":"info","message":"[cd3be570-5b6d-4742-a249-0d88cd16e5f3] consulta destruída"}
{"level":"info","message":"[70cdffe0-c23f-40c1-ae19-5feb8f39b994] consulta destruída"}
{"level":"info","message":"[c4bf9c59-7856-4371-9546-2c6d82925f84] consulta destruída"}
{"level":"info","message":"[e319b441-e14c-4cc8-9813-7c34e6809c79] consulta destruída"}
{"level":"info","message":"[d9cd6507-6448-49e4-a847-2456e8c4f476] consulta destruída"}
{"level":"info","message":"[a9677108-72ab-46c0-af09-7e427c90575d] consulta destruída"}
{"level":"info","message":"[9dd3f59a-1ff4-4a74-895b-18962e772257] consulta destruída"}
{"level":"info","message":"[26a4c3f9-960b-4f78-bb82-294267438292] consulta destruída"}
{"level":"info","message":"[42241083-b428-488a-b262-c13106910b14] consulta destruída"}
{"level":"error","message":"Erro ao agendar sessão: Cannot read properties of undefined (reading 'name')","stack":"TypeError: Cannot read properties of undefined (reading 'name')\n    at exports.createByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:150:37)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao agendar sessão: Cannot read properties of undefined (reading 'name')","stack":"TypeError: Cannot read properties of undefined (reading 'name')\n    at exports.createByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:154:37)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Erro ao agendar sessão: start is not defined","stack":"ReferenceError: start is not defined\n    at exports.createByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:156:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"error","message":"Erro ao atualizar sessão: invalid input syntax for type timestamp: \"Invalid date\"","name":"SequelizeDatabaseError","original":{"code":"22007","file":"datetime.c","length":158,"line":"4048","name":"error","parameters":["Invalid date",null,null,"2025-07-14 22:47:52.323 +00:00","61a87197-451a-484c-8fba-1d42e6d9c50c"],"routine":"DateTimeParseError","severity":"ERROR","sql":"UPDATE \"appointment\" SET \"scheduled_time\"=$1,\"label\"=$2,\"type_appointment\"=$3,\"updated_at\"=$4 WHERE \"id\" = $5","where":"unnamed portal parameter $1 = '...'"},"parameters":["Invalid date",null,null,"2025-07-14 22:47:52.323 +00:00","61a87197-451a-484c-8fba-1d42e6d9c50c"],"parent":{"code":"22007","file":"datetime.c","length":158,"line":"4048","name":"error","parameters":["Invalid date",null,null,"2025-07-14 22:47:52.323 +00:00","61a87197-451a-484c-8fba-1d42e6d9c50c"],"routine":"DateTimeParseError","severity":"ERROR","sql":"UPDATE \"appointment\" SET \"scheduled_time\"=$1,\"label\"=$2,\"type_appointment\"=$3,\"updated_at\"=$4 WHERE \"id\" = $5","where":"unnamed portal parameter $1 = '...'"},"sql":"UPDATE \"appointment\" SET \"scheduled_time\"=$1,\"label\"=$2,\"type_appointment\"=$3,\"updated_at\"=$4 WHERE \"id\" = $5","stack":"Error\n    at Query.run (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async PostgresQueryInterface.update (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:355:12)\n    at async model.save (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async model.update (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:2598:12)\n    at async exports.updateByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:191:5)"}
{"errors":[{"instance":{"created_at":"2025-07-15T01:46:51.761Z","id":"61a87197-451a-484c-8fba-1d42e6d9c50c","label":null,"location":"presencial","patient_id":"4ebf70e9-df72-4532-9006-7d146e446c65","scheduled_time":null,"status_appointment":"pendente","therapist_id":"75c67405-50ad-42ef-a429-cd04d6390931","type_appointment":null,"updated_at":"2025-07-14T22:48:18.676Z"},"message":"Appointment.scheduled_time cannot be null","origin":"CORE","path":"scheduled_time","type":"notNull Violation","validatorArgs":[],"validatorKey":"is_null","validatorName":null,"value":null}],"level":"error","message":"Erro ao atualizar sessão: notNull Violation: Appointment.scheduled_time cannot be null","name":"SequelizeValidationError","stack":"SequelizeValidationError: notNull Violation: Appointment.scheduled_time cannot be null\n    at InstanceValidator._validate (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async InstanceValidator._validateAndRunHooks (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:60:7)\n    at async InstanceValidator.validate (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:54:12)\n    at async model.save (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:2426:7)\n    at async model.update (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:2598:12)\n    at async exports.updateByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:191:5)"}
{"errors":[{"instance":{"created_at":"2025-07-15T01:46:51.761Z","id":"61a87197-451a-484c-8fba-1d42e6d9c50c","label":null,"location":"presencial","patient_id":"4ebf70e9-df72-4532-9006-7d146e446c65","scheduled_time":null,"status_appointment":"pendente","therapist_id":"75c67405-50ad-42ef-a429-cd04d6390931","type_appointment":null,"updated_at":"2025-07-14T22:48:24.595Z"},"message":"Appointment.scheduled_time cannot be null","origin":"CORE","path":"scheduled_time","type":"notNull Violation","validatorArgs":[],"validatorKey":"is_null","validatorName":null,"value":null}],"level":"error","message":"Erro ao atualizar sessão: notNull Violation: Appointment.scheduled_time cannot be null","name":"SequelizeValidationError","stack":"SequelizeValidationError: notNull Violation: Appointment.scheduled_time cannot be null\n    at InstanceValidator._validate (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async InstanceValidator._validateAndRunHooks (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:60:7)\n    at async InstanceValidator.validate (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:54:12)\n    at async model.save (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:2426:7)\n    at async model.update (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:2598:12)\n    at async exports.updateByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:191:5)"}
{"errors":[{"instance":{"created_at":"2025-07-15T01:46:51.761Z","id":"61a87197-451a-484c-8fba-1d42e6d9c50c","label":null,"location":"presencial","patient_id":"4ebf70e9-df72-4532-9006-7d146e446c65","scheduled_time":null,"status_appointment":"pendente","therapist_id":"75c67405-50ad-42ef-a429-cd04d6390931","type_appointment":null,"updated_at":"2025-07-14T22:48:27.018Z"},"message":"Appointment.scheduled_time cannot be null","origin":"CORE","path":"scheduled_time","type":"notNull Violation","validatorArgs":[],"validatorKey":"is_null","validatorName":null,"value":null}],"level":"error","message":"Erro ao atualizar sessão: notNull Violation: Appointment.scheduled_time cannot be null","name":"SequelizeValidationError","stack":"SequelizeValidationError: notNull Violation: Appointment.scheduled_time cannot be null\n    at InstanceValidator._validate (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async InstanceValidator._validateAndRunHooks (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:60:7)\n    at async InstanceValidator.validate (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:54:12)\n    at async model.save (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:2426:7)\n    at async model.update (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:2598:12)\n    at async exports.updateByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:191:5)"}
{"errors":[{"instance":{"created_at":"2025-07-15T01:46:51.761Z","id":"61a87197-451a-484c-8fba-1d42e6d9c50c","label":null,"location":"presencial","patient_id":"4ebf70e9-df72-4532-9006-7d146e446c65","scheduled_time":null,"status_appointment":"pendente","therapist_id":"75c67405-50ad-42ef-a429-cd04d6390931","type_appointment":null,"updated_at":"2025-07-14T22:48:29.245Z"},"message":"Appointment.scheduled_time cannot be null","origin":"CORE","path":"scheduled_time","type":"notNull Violation","validatorArgs":[],"validatorKey":"is_null","validatorName":null,"value":null}],"level":"error","message":"Erro ao atualizar sessão: notNull Violation: Appointment.scheduled_time cannot be null","name":"SequelizeValidationError","stack":"SequelizeValidationError: notNull Violation: Appointment.scheduled_time cannot be null\n    at InstanceValidator._validate (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async InstanceValidator._validateAndRunHooks (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:60:7)\n    at async InstanceValidator.validate (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:54:12)\n    at async model.save (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:2426:7)\n    at async model.update (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:2598:12)\n    at async exports.updateByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:191:5)"}
{"errors":[{"instance":{"created_at":"2025-07-15T01:46:51.761Z","id":"61a87197-451a-484c-8fba-1d42e6d9c50c","label":"sky","location":"presencial","patient_id":"4ebf70e9-df72-4532-9006-7d146e446c65","scheduled_time":null,"status_appointment":"pendente","therapist_id":"75c67405-50ad-42ef-a429-cd04d6390931","type_appointment":"individual","updated_at":"2025-07-14T23:11:34.554Z"},"message":"Appointment.scheduled_time cannot be null","origin":"CORE","path":"scheduled_time","type":"notNull Violation","validatorArgs":[],"validatorKey":"is_null","validatorName":null,"value":null}],"level":"error","message":"Erro ao atualizar sessão: notNull Violation: Appointment.scheduled_time cannot be null","name":"SequelizeValidationError","stack":"SequelizeValidationError: notNull Violation: Appointment.scheduled_time cannot be null\n    at InstanceValidator._validate (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async InstanceValidator._validateAndRunHooks (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:60:7)\n    at async InstanceValidator.validate (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:54:12)\n    at async model.save (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:2426:7)\n    at async model.update (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:2598:12)\n    at async exports.updateByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:191:5)"}
{"errors":[{"instance":{"created_at":"2025-07-15T01:46:51.761Z","id":"61a87197-451a-484c-8fba-1d42e6d9c50c","label":"sky","location":"presencial","patient_id":"4ebf70e9-df72-4532-9006-7d146e446c65","scheduled_time":null,"status_appointment":"pendente","therapist_id":"75c67405-50ad-42ef-a429-cd04d6390931","type_appointment":"casal","updated_at":"2025-07-14T23:18:00.722Z"},"message":"Appointment.scheduled_time cannot be null","origin":"CORE","path":"scheduled_time","type":"notNull Violation","validatorArgs":[],"validatorKey":"is_null","validatorName":null,"value":null}],"level":"error","message":"Erro ao atualizar sessão: notNull Violation: Appointment.scheduled_time cannot be null","name":"SequelizeValidationError","stack":"SequelizeValidationError: notNull Violation: Appointment.scheduled_time cannot be null\n    at InstanceValidator._validate (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async InstanceValidator._validateAndRunHooks (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:60:7)\n    at async InstanceValidator.validate (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/instance-validator.js:54:12)\n    at async model.save (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:2426:7)\n    at async model.update (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:2598:12)\n    at async exports.updateByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:191:5)"}
{"level":"error","message":"Erro ao atualizar sessão: invalid input syntax for type uuid: \"undefined\"","name":"SequelizeDatabaseError","original":{"code":"22P02","file":"uuid.c","length":109,"line":"133","name":"error","position":"215","routine":"string_to_uuid","severity":"ERROR","sql":"SELECT \"id\", \"therapist_id\", \"patient_id\", \"type_appointment\", \"status_appointment\", \"scheduled_time\", \"location\", \"label\", \"created_at\", \"updated_at\" FROM \"appointment\" AS \"Appointment\" WHERE \"Appointment\".\"id\" = 'undefined' AND \"Appointment\".\"therapist_id\" = '75c67405-50ad-42ef-a429-cd04d6390931';"},"parameters":{},"parent":{"code":"22P02","file":"uuid.c","length":109,"line":"133","name":"error","position":"215","routine":"string_to_uuid","severity":"ERROR","sql":"SELECT \"id\", \"therapist_id\", \"patient_id\", \"type_appointment\", \"status_appointment\", \"scheduled_time\", \"location\", \"label\", \"created_at\", \"updated_at\" FROM \"appointment\" AS \"Appointment\" WHERE \"Appointment\".\"id\" = 'undefined' AND \"Appointment\".\"therapist_id\" = '75c67405-50ad-42ef-a429-cd04d6390931';"},"sql":"SELECT \"id\", \"therapist_id\", \"patient_id\", \"type_appointment\", \"status_appointment\", \"scheduled_time\", \"location\", \"label\", \"created_at\", \"updated_at\" FROM \"appointment\" AS \"Appointment\" WHERE \"Appointment\".\"id\" = 'undefined' AND \"Appointment\".\"therapist_id\" = '75c67405-50ad-42ef-a429-cd04d6390931';","stack":"Error\n    at Query.run (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async PostgresQueryInterface.select (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async Appointment.findAll (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async Appointment.findOne (/home/paivs/Dev/Liszt/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async exports.updateByTherapist (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:181:25)"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"info","message":"Usuário logado: camila@terapia.com"}
{"level":"error","message":"Erro ao buscar sessões: Converting circular structure to JSON\n    --> starting at object with constructor 'Array'\n    |     index 0 -> object with constructor 'Object'\n    |     property 'parent' -> object with constructor 'Object'\n    --- property 'include' closes the circle","stack":"TypeError: Converting circular structure to JSON\n    --> starting at object with constructor 'Array'\n    |     index 0 -> object with constructor 'Object'\n    |     property 'parent' -> object with constructor 'Object'\n    --- property 'include' closes the circle\n    at JSON.stringify (<anonymous>)\n    at stringify (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/response.js:1160:12)\n    at ServerResponse.json (/home/paivs/Dev/Liszt/backend/node_modules/express/lib/response.js:271:14)\n    at exports.listAppointmentsByDateRange (/home/paivs/Dev/Liszt/backend/controllers/appointmentController.js:506:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
